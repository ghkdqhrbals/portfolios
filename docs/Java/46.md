---
layout: default
title: ê³µí†µ ê°œë°œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì„œ gradle ëª¨ë“ˆ github package ë¡œ ì‰½ê²Œ ê´€ë¦¬í•˜ê¸°
date: 2025-11-30
parent: ğŸ“Œ Server
---

êµì´Œ, ìë‹´ ë“± ì—¬ëŸ¬ í”„ëœì°¨ì´ì¦ˆ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë©´,
ê° í”„ë¡œì íŠ¸ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ(ë„ë©”ì¸, ìœ í‹¸, ì„¤ì • ë“±) ê°€ ìƒê¹ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì €í¬ íŒ€ì€ í•˜ë‚˜ì˜ ì €ì¥ì†Œ ì•ˆì— ì—¬ëŸ¬ ë¸Œëœë“œì˜ ëª¨ë“ˆì„ í•¨ê»˜ ê´€ë¦¬í•˜ëŠ” êµ¬ì¡°ë¡œ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.

```bash
server-repo/             # ì €ì¥ì†Œ ë£¨íŠ¸
â”œâ”€ domain/                      # ê³µí†µ ë„ë©”ì¸ ëª¨ë“ˆ
â”‚  â””â”€ ì—¬ëŸ¬ ê³µí†µ ë„ë©”ì¸ í´ë˜ìŠ¤ë“¤
â”œâ”€ service-kyochon/             # êµì´Œ ì„œë¹„ìŠ¤ ëª¨ë“ˆ
â”‚  â”œâ”€ user/
â”‚  â”œâ”€ external/
â”‚  â””â”€ admin/
â”œâ”€ service-jadam/               # ìë‹´ ì„œë¹„ìŠ¤ ëª¨ë“ˆ
â”‚  â”œâ”€ user/
â”‚  â”œâ”€ external/
â”‚  â””â”€ admin/
```

ì´ êµ¬ì¡°ì—ì„œëŠ” domain ëª¨ë“ˆì„ ê³µí†µìœ¼ë¡œ ì°¸ì¡°í•´
ê° ì„œë¹„ìŠ¤ê°€ ë™ì¼í•œ ë„ë©”ì¸ ë¡œì§ì„ ì‰½ê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

--------

**í•˜ì§€ë§Œ, "ë ˆí¬ë¥¼ ë‚˜ëˆ„ê±°ë‚˜ ë‹¤ë¥¸ ë ˆí¬ì—ì„œ í•´ë‹¹ ëª¨ë“ˆ ì‚¬ìš©" ì‹œì ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤**

ì²˜ìŒì—ëŠ” monorepo í˜•íƒœë¡œ ê´€ë¦¬í•˜ê¸° í¸í•˜ì§€ë§Œ,
ë¸Œëœë“œë³„ ë ˆí¬ì§€í† ë¦¬ë¥¼ ë¶„ë¦¬í•´ì•¼ í•˜ëŠ” ì‹œì ì´ ì˜¤ë©´ ë¬¸ì œê°€ ìƒê¹ë‹ˆë‹¤.

* ê³µí†µ ëª¨ë“ˆ(domain)ì„ ë³µì‚¬í•´ì•¼ í•¨
* ê° í”„ë¡œì íŠ¸ì—ì„œ ë²„ì „ ê´€ë¦¬ê°€ ë”°ë¡œ ì´ë£¨ì–´ì§
* ìˆ˜ì • ë‚´ìš©ì´ ì„œë¡œ ë‹¤ë¥¸ ì €ì¥ì†Œì— ì¤‘ë³µ ë°˜ì˜ë¨

ê²°êµ­ ì½”ë“œê°€ ì¤‘ë³µë˜ê³ ,
"ì–´ëŠ ë²„ì „ì´ ìµœì‹ ì¸ì§€" ê´€ë¦¬í•˜ê¸° ì–´ë ¤ìš´ ìƒí™©ì´ ë°œìƒí•©ë‹ˆë‹¤ ã…œã…œ.

--------

ê·¸ë˜ì„œ ì„ íƒí•œ ë°©ë²•ì€? **GitHub Packages** !

ê³µí†µ ëª¨ë“ˆì„ GitHub Packagesë¡œ ë°°í¬í•˜ì—¬ ë”°ë¡œ **ë²„ì „ ê´€ë¦¬**í•  ìˆ˜ ìˆê³  ê° ì„œë¹„ìŠ¤ì—ì„œ ë²„ì „ë§Œ ì§€ì •í•´ ì‰½ê²Œ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[https://github.com/ghkdqhrbals/personal-module](https://github.com/ghkdqhrbals/personal-module)

* github-actions ë¡œ pr í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì½”ë©˜íŠ¸ ë° ìˆ˜ë™ publish ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •

![t1](../2025-10-10-16-48-35.png)

![t2](../2025-10-10-16-49-10.png)

* ë°°í¬ì™„ë£Œ ì‹œ tagging + release + slack alert

![t3](../2025-10-10-16-49-41.png)

![t4](../2025-10-10-16-50-24.png)

ì´ë ‡ê²Œ í•˜ë©´ ê° ì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¨ìˆœíˆ ì•„ë˜ì²˜ëŸ¼ ì˜ì¡´ì„±ë§Œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.

```
repositories {
    mavenCentral()
    maven {
        url = uri("https://maven.pkg.github.com/ghkdqhrbals/personal-module")
        credentials {
            username = "<github_username>"
            password = "<personal_access_token>"
        }
    }
}

dependencies {
    implementation("com.github.ghkdqhrbals:personal-module:0.2.0")
}
```

ì´ì œ ê° í”„ëœì°¨ì´ì¦ˆ ì„œë¹„ìŠ¤ëŠ” domainì´ë‚˜ common-moduleì„ ì§ì ‘ í¬í•¨í•˜ì§€ ì•Šê³ ë„,
í•„ìš”í•œ ê³µí†µ ê¸°ëŠ¥ë§Œ ëª…í™•íˆ ë²„ì „ìœ¼ë¡œ ê´€ë¦¬í•˜ë©´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë•ë¶„ì— ì½”ë“œ ì¤‘ë³µì´ ì¤„ê³ , ëª¨ë“ˆë³„ ë…ë¦½ì„±ë„ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤!


```mermaid
sequenceDiagram
    autonumber

    participant C as Client (Browser/App)
    participant API as API Server<br/>(Spring Boot / Kotlin)
    participant RAM as API Local Memory<br/>(eventId â†’ Future)
    participant R as Redis Stream<br/>create-order
    participant CS as Consumer Service<br/>(Order/Cart Processor)
    participant DB as Event Store<br/>(MongoDB)
    participant RS as Redis Session Router<br/>sse:{userId}=serverId
    participant S1 as Server-A<br/>(SSE/WebSocket Holder)
    participant S2 as Server-B<br/>(SSE/WebSocket Holder)
    participant GRPC as gRPC Internal Call

    C->>API: POST /orders (ì£¼ë¬¸ ìš”ì²­)
    API->>API: eventId ìƒì„±
    API->>RAM: Future ì €ì¥ (eventId â†’ CompletableFuture)
    API->>R: XADD create-order {eventId, userId, payload}
    API-->>C: 202 Accepted<br/>{eventId}

    Note over API: Controller ìŠ¤ë ˆë“œëŠ” Future.await()

    R->>CS: Consumer reads event (create-order)
    CS->>DB: event.state = PROCESSING ì—…ë°ì´íŠ¸
    CS->>CS: ì£¼ë¬¸/ì¥ë°”êµ¬ë‹ˆ ë¡œì§ ì²˜ë¦¬

    alt ì²˜ë¦¬ ì„±ê³µ
        CS->>DB: event.state = COMPLETED, result ì €ì¥
    else ì²˜ë¦¬ ì‹¤íŒ¨
        CS->>DB: event.state = FAILED, error ì €ì¥
    end

    CS->>RS: GET sse:{userId} â†’ serverId

    alt serverId == CS ì„œë²„ (ì˜ˆ: Server-A)
        CS->>S1: pushEvent(eventId, result)
        S1->>C: SSE/WebSocket: ì£¼ë¬¸ ì²˜ë¦¬ ì™„ë£Œ(result)
        S1->>RAM: eventId Future.complete(result)
    else serverId != CS ì„œë²„ (ì˜ˆ: Server-B)
        CS->>GRPC: pushEvent(serverId, eventId, result)
        GRPC->>S2: ì „ë‹¬
        S2->>C: SSE/WebSocket: ì£¼ë¬¸ ì²˜ë¦¬ ì™„ë£Œ(result)
        S2->>RAM: eventId Future.complete(result)
    end

    API-->>C: HTTP ìµœì¢… ì‘ë‹µ(Future ì™„ë£Œ í›„)

```