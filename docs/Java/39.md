---
layout: default
title: ElasticSearch
date: 2025-10-04
parent: ğŸ“Œ Server
---

```
{"@timestamp":"2025-10-10T01:30:54.344Z", "log.level": "WARN", "message":"high disk watermark [90%] exceeded on [iYjn6nhrT-2vbYycA5rqIw][elasticsearch-es-default-0][/usr/share/elasticsearch/data] free: 9.5gb[9.5%], shards will be relocated away from this node; currently relocating away shards totalling [0] bytes; the node is expected to continue to exceed the high disk watermark when these relocations are complete", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[elasticsearch-es-default-0][masterService#updateTask][T#61283]","log.logger":"org.elasticsearch.cluster.routing.allocation.DiskThresholdMonitor","elasticsearch.cluster.uuid":"j0uwAj-lTbCWO3z0IzpX6w","elasticsearch.node.id":"iYjn6nhrT-2vbYycA5rqIw","elasticsearch.node.name":"elasticsearch-es-default-0","elasticsearch.cluster.name":"elasticsearch"}
```

ìš©ëŸ‰ì œí•œ 90% ê°€ ë„˜ìœ¼ë©´ ê²½ê³ ê°€ ëœ¨ê³ , 95% ê°€ ë„˜ìœ¼ë©´ ì½ê¸°ì „ìš©ìœ¼ë¡œ ë°”ë€ë‹¤. ebs ë³¼ë¥¨ ì“°ê³ ìˆëŠ”ë° 

```
PUT _data_stream/logs-generic-default/_lifecycle
{
  "policy": "delete-after-14d"
}
```

ë¡¤ì˜¤ë²„ë¡œ ìƒˆë¡œìš´ ì¸ë±ìŠ¤ ìƒì„±í•˜ëŠ”ê±° êµ³ì´ ì•ˆì¨ë„ ë¨. ì–´ì°¨í”¼ ìš°ë¦¬ëŠ” í•˜ë£¨ë‹¨ìœ„ë¡œ ìƒˆë¡œìš´ ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ê³  30ì¼ê°„ ìœ ì§€í•˜ê¸°ë–„ë¬¸ì— ê·¸ëƒ¥ ê¸°ì¡´ 2025-10-10 ì¸ë±ìŠ¤ì—ì„œ 30ì¼ ì§€ë‚œ ë°ì´í„° ì‚­ì œí•˜ëŠ”ê±¸ë¡œ ì¶©ë¶„í•¨.

```
PUT _ilm/policy/k8s-30d-delete
{
  "policy": {
    "phases": {
      "delete": {
        "min_age": "30d",
        "actions": { "delete": {} }
      }
    }
  }
}
```

index ìš°ë¦° `k8s-2025.09.11` íŒ¨í„´ìœ¼ë¡œ ìƒì„±ë˜ê³  ì´í›„ ì´ëŸ¬í•œ ì¸ë±ìŠ¤ë“¤ ëª¨ë‘ì— 30ì¼ í›„ ì‚­ì œ ì •ì±…ì„ ì ìš©í•˜ë ¤ë©´ ì•„ë˜ì˜ í…œí”Œë¦¿ì„ ìƒì„±í•´ì£¼ë©´ ëœë‹¤.

```
PUT _index_template/k8s-template
{
  "index_patterns": ["k8s-*"],
  "template": {
    "settings": {
      "index.lifecycle.name": "k8s-30d-delete"
    }
  },
  "priority": 500
}
```