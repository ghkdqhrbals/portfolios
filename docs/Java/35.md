---
layout: default
title: Spring batch
date: 2025-05-21
parent: ğŸ“Œ Server
---


ì£¼ë¬¸ ê´€ë ¨ ë°°ì¹˜ ì‘ì—… ì¤‘ ë³€ê²½ê°ì§€ ì•ˆë˜ì„œ ì •ë¦¬í•¨. í˜„ì¬ëŠ” Spring batch ì—ì„œ reader processor writer step ì¤‘ ItemReader ë‚´ë¶€ì—ì„œ last read id + offset size ë¡œ Pagination í•´ì„œ ì½ì–´ì˜¤ê³  ìˆìŒ. ê·¸ë˜ì•¼ mysql offset based ë¡œ pagination í•´ì„œ ì½ì—ˆì„ ë•Œ ì˜¤ëŠ” ì˜¤ë²„í—¤ë“œë¥¼ í™• ì¤„ì¼ ìˆ˜ ìˆìŒ. index íƒ€ê³  ê±°ê¸°ì„œë¶€í„° offset ì½ìœ¼ë©´ ë¹ ë¥´ê¸° ë•Œë¬¸. ì¼ë‹¨ ì—¬ê¸°ì„œ ì´ ItemReader ëŠ” ì˜ì†ì„±ì— ë“¤ì–´ìˆëŠ” ì—”í‹°í‹°ë¥¼ detached ì‹œí‚¨ë‹¤ê³ í•¨. ê·¸ëŸ¬ë‹ˆê¹Œ reader step ì§€ë‚˜ë©´ chunk ë‚´ì—ì„œ ë‹¤ì‹œ merge ì‹œì¼œì¤˜ì•¼í•¨. ì˜ì†ì„± ë‹¤ ê´€ë¦¬í• ë ¤ë©´ ë©”ëª¨ë¦¬ê°€ í˜ë“œë‹ˆê¹Œ ì¤‘ê°„ì— detached ì‹œí‚¨ë‹¤ê³  í•œë‹¤.

```
ItemReader for reading database records built on top of JPA.

It executes the JPQL setQueryString(String) to retrieve requested data. The query is executed using paged requests of a size specified in AbstractPagingItemReader.setPageSize(int). Additional pages are requested when needed as AbstractItemCountingItemStreamItemReader.read() method is called, returning an object corresponding to current position.

The performance of the paging depends on the JPA implementation and its use of database specific features to limit the number of returned rows.

Setting a fairly large page size and using a commit interval that matches the page size should provide better performance.

In order to reduce the memory usage for large results the persistence context is flushed and cleared after each page is read. This causes any entities read to be detached. If you make changes to the entities and want the changes persisted then you must explicitly merge the entities.
```


