---
layout: default
title: Consumer 제거 필요 및 stream 별 redis node 메모리 사용량 모니터링 추가
parent: 토스 러너스 하이 2기
date: 2026-01-01
---

![](../2026-01-01-18-03-37.png)

현재 서버 배포 시 consumer 재기동 하며 이 떄 consumer-id 가 변하도록 설정하였습니다. 이로 인해 기존에 연결되어있던 consumer 가 재기동 시점에 끊어지게 되고, 이후 idleTime 이 일정 시간 이후에 자동으로 redis stream 에서 제거하는 로직이 필요합니다.

# 모니터링에 stream 별 redis node memory 사용량 모니터링 추가

* stream 별 메모리 사용량 추가
* stream 이 어느 redis node 에 할당되어있는지도 actuator -> prometheus -> grafana 모니터링 추가

![](../2026-01-01-18-33-13.png)

![](../2026-01-01-19-06-20.png)
