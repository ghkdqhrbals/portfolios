---
layout: default
title: stream key size 확인 
parent: 토스 러너스 하이 2기
date: 2026-01-03
---

![](../2026-01-03-16-30-20.png)

stream 10MB 증가량 만큼 정상적으로 노드 메모리 집계되는 것을 확인할 수 있습니다.

![](../2026-01-03-17-58-19.png)

idleTime 이 5분 이상 + Pending message 가 없는 consumer 들을 주기적으로 정리해주는 로직도 추가하였고 위 스크린샷과 같이 Active consumer 수도 줄어든 것을 확인할 수 있습니다. idleTime 은 참고로 XREADGROUP 호출 시에 업데이트 됩니다. 그래서 Spring boot 에서 listener 설정하면 주기적으로 XREADGROUP 을 polling 하는 구조라 헬스체크처럼 사용해도 무방합니다!

![](../2026-01-03-18-02-53.png)

메세지 처리에 약 1초 정도 걸리는데 lag 가 정상적으로 줄어드는 것을 확인할 수 있습니다. 미처리된 PEL 내 남아있는 메세지들도 같이 스케줄링으로 재소비하도록 설정하였고 아래는 모니터링 종합 결과입니다.

![](../2026-01-03-18-03-45.png)