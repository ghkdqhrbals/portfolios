---
layout: default
title: 5. Kafka ì—°ë™ì™„ë£Œ
parent: ğŸ“Œ ì‹¤ì‹œê°„ ì±„íŒ…ì„œë²„ í”„ë¡œì íŠ¸
nav_order: 5
---

created at 2022-12-21
{: .label .label-yellow }

## ì§„í–‰ìƒí™©
### Backend Server ì™„ë£Œ
ì•„ë˜ëŠ” Kafka Backend Server ì„¸íŒ… í´ë˜ìŠ¤ ë° ê¸°ëŠ¥ë“¤ì´ë‹¤.
1. MessageListener : ì‹¤ì œ ë©”ì„¸ì§€ ë‚´ë¶€ ë¡œì§ ìˆ˜í–‰
2. KafkaTopicConst : í† í”½ì„ application-propertiesì—ì„œ ë¡œë“œ
3. KafkaTopicConfig : í† í”½ ë“±ë¡
4. KafkaConsumerConfig : ë©”ì„¸ì§€ ìˆ˜ì‹  ê·¸ë£¹ ë° íƒ€ì… ì„¤ì •
5. KafkaProducerConfig : ë©”ì„¸ì§€ ë°œì‹  ì„¤ì •
6. KafkaAdminConfig : ì¹´í”„ì¹´ ì—°ê²°

### í…ŒìŠ¤íŠ¸(Login)

1. ë©”ì„¸ì§€ ì „ì†¡
   ![img](../../../assets/img/kafka/post.png)

2. ë©”ì„¸ì§€ ìˆ˜ì‹ 
    ```bash
    # ì§ì ‘ ë©”ì„¸ì§€ ì†Œë¹„
    [appuser@1ec915a5c4a5 ~]$ kafka-console-consumer --bootstrap-server localhost:9092 --topic login-response

    {"userId":"a","isSuccess":true,"errorMessage":"","user":{"userId":"a","userPw":"1234","email":"a@naver.com","userName":"user_A","userStatus":"ë°”ë€ status message","joinDate":[2022,12,17],"loginDate":[2022,12,22],"logoutDate":[2022,12,17]}}
    ```

### Kafka ì½”ë“œ
```java
@Slf4j
@Component
public class MessageListener extends KafkaTopicConst{
    private final KafkaTemplate<String, Object> kafkaProducerTemplate;
    private final UserService userService;
    private final FriendService friendService;
    private final RoomService roomService;
    private final ChatService chatService;

    public MessageListener(KafkaTemplate<String, Object> kafkaProducerTemplate, UserService userService, FriendService friendService, RoomService roomService, ChatService chatService) {
        this.kafkaProducerTemplate = kafkaProducerTemplate;
        this.userService = userService;
        this.friendService = friendService;
        this.roomService = roomService;
        this.chatService = chatService;
    }

    // ë¡œê·¸ì¸ ìš”ì²­
    @KafkaListener(topics = "${kafka.topic-login-request}", containerFactory = "loginKafkaListenerContainerFactory")
    public void listenLogin(RequestLoginDTO req) {
        log.info("Receive [RequestLoginDTO] Message with userId={},userPw={}",req.getUserId(),req.getUserPw());

        ResponseLoginDTO resp = userService.login(req.getUserId(), req.getUserPw());

        // Kafka ë©”ì„¸ì§€ ì „ì†¡/ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ListenableFuture ì‚¬ìš©
        ListenableFuture<SendResult<String, Object>> future = kafkaProducerTemplate.send(TOPIC_LOGIN_RESPONSE, req.getUserId(),resp);
        listenFuture(future); // ë©”ì‹œì§€ ë¹„ë™ê¸° callback ì²˜ë¦¬
    }

    // ë¡œê·¸ì•„ì›ƒ ìš”ì²­
    @KafkaListener(topics = "${kafka.topic-logout-request}", containerFactory = "logoutKafkaListenerContainerFactory")
    public void listenLogin(@Payload String userId) {
        ResponseLogoutDTO resp = userService.logout(userId);

        ListenableFuture<SendResult<String, Object>> future = kafkaProducerTemplate.send(TOPIC_LOGOUT_RESPONSE, userId, resp);
        listenFuture(future);
    }

    // ìœ ì € ì°¸ì—¬ ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ
    @KafkaListener(topics = "${kafka.topic-user-search-room-request}", containerFactory = "userRoomKafkaListenerContainerFactory")
    public void rooms(RequestUserRoomDTO req){
        ResponseUserRoomDTO resp = userService.findAllMyRooms(req.getUserId());

        ListenableFuture<SendResult<String, Object>> future = kafkaProducerTemplate.send(TOPIC_USER_SEARCH_ROOM_RESPONSE, req.getUserId(),resp);
        listenFuture(future);
    }

    // ìœ ì €ì˜ ì¹œêµ¬ëª©ë¡ ì¡°íšŒ
    @KafkaListener(topics = "${kafka.topic-user-search-friend-request}", containerFactory = "userSearchFriendKafkaListenerContainerFactory")
    public void findFriend(RequestUserFriendDTO req){
        String userId = req.getUserId();

        ResponseUserFriendDTO resp = new ResponseUserFriendDTO(userId);

        Optional<User> findUser = userService.findById(userId);

        if (!findUser.isPresent()){
            resp.setStat(userId + "ìœ ì €ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
        }else{
            List<Friend> friends = friendService.findAllByUserId(userId);
            resp.setIsSuccess(true);
            resp.setFriend(friends);
        }
        ListenableFuture<SendResult<String, Object>> future = kafkaProducerTemplate.send(TOPIC_USER_SEARCH_FRIEND_RESPONSE, req.getUserId(),resp);
        listenFuture(future);
    }

    // ìœ ì € ì €ì¥
    @KafkaListener(topics = "${kafka.topic-user-add-request}", containerFactory = "userAddKafkaListenerContainerFactory")
    public void addUser(RequestAddUserDTO req){
        User user = new User(
                req.getUserId(),
                req.getUserPw(),
                req.getEmail(),
                req.getUserName(),
                "",
                LocalDate.now(),
                LocalDate.now(),
                LocalDate.now()
        );

        ResponseAddUserDTO resp = userService.save(user);

        ListenableFuture<SendResult<String, Object>> future = kafkaProducerTemplate.send(TOPIC_USER_ADD_RESPONSE, req.getUserId(),resp);
        listenFuture(future);
    }

    // ìœ ì € ìƒíƒœë©”ì„¸ì§€ ë³€ê²½
    @KafkaListener(topics = "${kafka.topic-user-status-change-request}", containerFactory = "userChangeStatusKafkaListenerContainerFactory")
    public void changeUserStatus(RequestChangeUserStatusDTO req){
        ResponseChangeUserStatusDTO resp = userService.updateUserStatus(req);

        ListenableFuture<SendResult<String, Object>> future =
                kafkaProducerTemplate.send(TOPIC_USER_STATUS_CHANGE_RESPONSE, req.getUserId(),resp);
        listenFuture(future);
    }

    //ì±„íŒ…ë°© ê°œì„¤
    @KafkaListener(topics = "${kafka.topic-user-add-room-request}", containerFactory = "userAddRoomKafkaListenerContainerFactory")
    public void createRoomForm(RequestAddUserRoomDTO req){
        ResponseAddUserRoomDTO resp = userService.makeRoomWithFriends(req);

        ListenableFuture<SendResult<String, Object>> future =
                kafkaProducerTemplate.send(TOPIC_USER_ADD_ROOM_RESPONSE, req.getUserId(),resp);
        listenFuture(future);
    }

    // ì±„íŒ… ì €ì¥
    @KafkaListener(topics = "${kafka.topic-user-add-chat-request}", containerFactory = "userAddChatKafkaListenerContainerFactory")
    public void chattingRoom(RequestAddChatMessageDTO req) {

        Optional<Room> room = roomService.findByRoomId(req.getRoomId());
        Optional<User> user = userService.findById(req.getWriterId());

        ResponseAddChatMessageDTO resp = new ResponseAddChatMessageDTO(req.getRoomId(),req.getWriterId());

        if (!room.isPresent()){
            resp.setErrorMessage("ì±„íŒ…ë°©ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
        }
        if(!user.isPresent()){
            resp.setErrorMessage("ìœ ì €ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
        }

        Chatting chat = createChatting(user.get(),room.get(),req.getMessage());

        resp = chatService.save(chat);

        ListenableFuture<SendResult<String, Object>> future =
                kafkaProducerTemplate.send(TOPIC_USER_ADD_CHAT_RESPONSE, req.getWriterId(),resp);
        listenFuture(future);
    }

    // ì¹œêµ¬ ì €ì¥
    @KafkaListener(topics = "${kafka.topic-user-add-friend-request}", containerFactory = "userAddFriendKafkaListenerContainerFactory")
    public void addFriend(RequestAddFriendDTO req){
        List<String> friendIds = req.getFriendId();
        ResponseAddFriendDTO resp = new ResponseAddFriendDTO(req.getUserId());

        for(String friendId : friendIds){
            Optional<User> findId = userService.findById(friendId);
            if (!findId.isPresent()){
                resp.setErrorMessage("ìœ ì €ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
                break;
            }
            friendService.save(req.getUserId(), friendId);
        }

        ListenableFuture<SendResult<String, Object>> future =
                kafkaProducerTemplate.send(TOPIC_USER_ADD_FRIEND_RESPONSE, req.getUserId(),resp);
        listenFuture(future);
    }


    // utils
    private Chatting createChatting(User user,Room room, String message){
        Chatting chat = new Chatting();
        chat.setRoom(room);
        chat.setSendUser(user);
        chat.setCreatedDate(ZonedDateTime.now().toLocalDate());
        chat.setCreatedTime(ZonedDateTime.now().toLocalTime());
        chat.setMessage(message);
        return chat;
    }

    private void listenFuture(ListenableFuture<SendResult<String, Object>> future) {
        future.addCallback(new ListenableFutureCallback<SendResult<String, Object>>() {
            @Override
            public void onFailure(Throwable ex) {
                log.error("ë©”ì„¸ì§€ ì „ì†¡ ì‹¤íŒ¨ : {}", ex.getMessage());
            }
            @Override
            public void onSuccess(SendResult<String, Object> result) {
                log.info("ë©”ì„¸ì§€ ì „ì†¡ ì„±ê³µ topic: {}, offset: {}, partition: {}",result.getRecordMetadata().topic() ,result.getRecordMetadata().offset(), result.getRecordMetadata().partition());
            }
        });
    }
}
```
```java
@Component
public class KafkaTopicConst {
    @Value("${kafka.topic-login-request}")
    public String TOPIC_LOGIN_REQUEST;
    @Value("${kafka.topic-login-response}")
    public String TOPIC_LOGIN_RESPONSE;

    @Value("${kafka.topic-logout-request}")
    public String TOPIC_LOGOUT_REQUEST;
    @Value("${kafka.topic-logout-response}")
    public String TOPIC_LOGOUT_RESPONSE;

    @Value("${kafka.topic-user-search-room-request}")
    public String TOPIC_USER_ROOM_REQUEST;
    @Value("${kafka.topic-user-search-room-response}")
    public String TOPIC_USER_ROOM_RESPONSE;

    @Value("${kafka.topic-user-search-room-request}")
    public String TOPIC_USER_SEARCH_ROOM_REQUEST;
    @Value("${kafka.topic-user-search-room-response}")
    public String TOPIC_USER_SEARCH_ROOM_RESPONSE;

    @Value("${kafka.topic-user-search-friend-request}")
    public String TOPIC_USER_SEARCH_FRIEND_REQUEST;
    @Value("${kafka.topic-user-search-friend-response}")
    public String TOPIC_USER_SEARCH_FRIEND_RESPONSE;

    @Value("${kafka.topic-user-add-request}")
    public String TOPIC_USER_ADD_REQUEST;
    @Value("${kafka.topic-user-add-response}")
    public String TOPIC_USER_ADD_RESPONSE;

    @Value("${kafka.topic-user-status-change-request}")
    public String TOPIC_USER_STATUS_CHANGE_REQUEST;
    @Value("${kafka.topic-user-status-change-response}")
    public String TOPIC_USER_STATUS_CHANGE_RESPONSE;

    @Value("${kafka.topic-user-add-room-request}")
    public String TOPIC_USER_ADD_ROOM_REQUEST;
    @Value("${kafka.topic-user-add-room-response}")
    public String TOPIC_USER_ADD_ROOM_RESPONSE;
    @Value("${kafka.topic-user-add-chat-request}")
    public String TOPIC_USER_ADD_CHAT_REQUEST;
    @Value("${kafka.topic-user-add-chat-response}")
    public String TOPIC_USER_ADD_CHAT_RESPONSE;

    @Value("${kafka.topic-user-add-friend-request}")
    public String TOPIC_USER_ADD_FRIEND_REQUEST;
    @Value("${kafka.topic-user-add-friend-response}")
    public String TOPIC_USER_ADD_FRIEND_RESPONSE;
}
```
```java
@Configuration
public class KafkaTopicConfig extends KafkaTopicConst {
    @Autowired
    private KafkaAdmin kafkaAdmin;

    // ê³„ì‚° ì˜ í•´ì•¼í•œë‹¤. Partition ê°œìˆ˜ >= Groupë‚´ Conusmer ê°œìˆ˜
    // ìƒì„±í•˜ê³ ì í•˜ëŠ” Conumser=2 Partitionì€ 2ì´ê¸°ì—, ê°ê° conusmerì—ê²Œ leader-partition ë§¤ì¹­ê°€ëŠ¥
    private NewTopic generateTopic(String topicName,int partitionNum, int brokerNum) {
        return TopicBuilder.name(topicName)
                .partitions(partitionNum) // í• ë‹¹í•˜ê³ ì í•˜ëŠ” íŒŒí‹°ì…˜ ê°œìˆ˜
                .replicas(brokerNum) // replica syncë¥¼ ìœ„í•œ broker ê°œìˆ˜
                .build(); // í† í”½ì€ ì´ 2ê°œì˜ leader-partition, 4ê°œì˜ follow-partition ë¡œ ì„¤ì •í•  ê²ƒì„
    }

    @PostConstruct
    public void init() {
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_LOGIN_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_LOGIN_RESPONSE,2,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_LOGOUT_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_LOGOUT_RESPONSE,2,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ROOM_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ROOM_RESPONSE,2,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_SEARCH_ROOM_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_SEARCH_ROOM_RESPONSE,2,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_SEARCH_FRIEND_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_SEARCH_FRIEND_RESPONSE,2,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ADD_REQUEST,5,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ADD_RESPONSE,5,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_STATUS_CHANGE_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_STATUS_CHANGE_RESPONSE,2,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ADD_ROOM_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ADD_ROOM_RESPONSE,2,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ADD_CHAT_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ADD_CHAT_RESPONSE,2,3));

        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ADD_FRIEND_REQUEST,2,3));
        kafkaAdmin.createOrModifyTopics(generateTopic(TOPIC_USER_ADD_FRIEND_RESPONSE,2,3));
    }
}
```
```java
@Configuration
@EnableKafka
public class KafkaProducerConfig {

    @Value("${kafka.bootstrap-servers}")
    private String bootstrapServer;

    private ProducerFactory<String, Object> producerFactory() {
        Map<String, Object> configProps = new HashMap<>();
        configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServer);
        configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);
        configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);

        return new DefaultKafkaProducerFactory<>(configProps);
    }

    @Bean
    public KafkaTemplate<String, Object> kafkaProducerTemplate() {
        return new KafkaTemplate<>(producerFactory());
    }

}
```
```java
@Slf4j
@EnableKafka
@Configuration
public class KafkaConsumerConfig {
    @Value("${kafka.bootstrap-servers}")
    private String bootstrapServer;

    // ë¡œê·¸ì¸ ìš”ì²­
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, RequestLoginDTO> loginKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",RequestLoginDTO.class);
    }
    // ë¡œê·¸ì•„ì›ƒ
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, String> logoutKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",String.class);
    }
    // ìœ ì € ì°¸ì—¬ ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, RequestUserRoomDTO> userRoomKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",RequestUserRoomDTO.class);
    }
    // ìœ ì € ì¹œêµ¬ëª©ë¡ ì¡°íšŒ
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, RequestUserFriendDTO> userSearchFriendKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",RequestUserFriendDTO.class);
    }
    // ìœ ì € ì €ì¥
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, RequestAddUserDTO> userAddKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",RequestAddUserDTO.class);
    }
    // ìœ ì € ìƒíƒœë©”ì„¸ì§€ ë³€ê²½
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, RequestChangeUserStatusDTO> userChangeStatusKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",RequestChangeUserStatusDTO.class);
    }
    // ì±„íŒ…ë°© ê°œì„¤
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, RequestAddUserRoomDTO> userAddRoomKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",RequestAddUserRoomDTO.class);
    }
    // ì±„íŒ… ì €ì¥
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, RequestAddChatMessageDTO> userAddChatKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",RequestAddChatMessageDTO.class);
    }
    // ìœ ì € ì¹œêµ¬ ì €ì¥
    @Bean
    public ConcurrentKafkaListenerContainerFactory<String, RequestAddFriendDTO> userAddFriendKafkaListenerContainerFactory() {
        return getContainerFactory("defaultGroup",RequestAddFriendDTO.class);
    }

    /**
     * ìœ í‹¸ ëª©ë¡ - ì œë„¤ë¦­ í´ë˜ìŠ¤ë¡œ ì—¬ëŸ¬ë©”ì†Œë“œì—ì„œ ì¤‘ë³µì‚¬ìš©ê°€ëŠ¥í•˜ë„ë¡ ìœ í‹¸í™”í•˜ì˜€ë‹¤.
     * --Methods--
     * getContainerFactory()
     * getKafkaConsumerFactory()
     * setConfig()
     * setDeserializer()
     */

    private <T> ConcurrentKafkaListenerContainerFactory<String, T> getContainerFactory(String groupId, Class<T> classType) {
        ConcurrentKafkaListenerContainerFactory<String, T> factory = new ConcurrentKafkaListenerContainerFactory<>();
        factory.setConsumerFactory(getKafkaConsumerFactory(groupId, classType));
        return factory;
    }

    private <T> DefaultKafkaConsumerFactory<String, T> getKafkaConsumerFactory(String groupId,Class<T> classType) {
        JsonDeserializer<T> deserializer = setDeserializer(classType);
        return new DefaultKafkaConsumerFactory<>(setConfig(groupId, deserializer), new StringDeserializer(), deserializer);
    }

    private <T> ImmutableMap<String, Object> setConfig(String groupId, JsonDeserializer<T> deserializer) {
        ImmutableMap<String, Object> config = ImmutableMap.<String, Object>builder()
                .put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServer)
                .put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class)
                .put(ConsumerConfig.GROUP_ID_CONFIG, groupId)
                .put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, deserializer)
                .build();
        return config;
    }

    private <T> JsonDeserializer<T> setDeserializer(Class<T> classType) {
        JsonDeserializer<T> deserializer = new JsonDeserializer<>(classType);
        deserializer.setRemoveTypeHeaders(false);
        deserializer.addTrustedPackages("*");
        deserializer.setUseTypeMapperForKey(true);
        return deserializer;
    }
}
```
```java
@Configuration
public class KafkaAdminConfig {

    @Value("${kafka.bootstrap-servers}")
    private String bootstrapServer;

    @Bean
    public KafkaAdmin kafkaAdmin() {
        Map<String, Object> configs = new HashMap<>();
        configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServer);

        return new KafkaAdmin(configs);
    }
}
```
ì´ ë°–ì— ë§ì€ìˆ˜ì˜ ë°ì´í„° ë°œì‹ /ìˆ˜ì‹  í¬ë©§ë“¤ê³¼ ì„œë¹„ìŠ¤ë“¤ì´ ì—°ê³„ë˜ì–´ ì‚¬ìš©ëœë‹¤.

### Frontend Server ì§„í–‰ì¤‘
Backend ê°œë°œ ì´í›„ ì„¸ì…˜ê³¼ í˜ì´ì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” Frontend Serverì„ ê°œë°œì¤‘ì— ìˆë‹¤. ì´ ê³¼ì •ì—ì„œ ê³ ë ¤í•  ëª‡ê°€ì§€ë¥¼ ì¶”ê°€í•˜ë ¤ í•œë‹¤.

* **Server-Sent Eventë¡œ ì§„í–‰**

ì´ì „ ê³„íšì€ Frontend Serverì—ì„œ webClientë¡œ HTTP ë¹„ë™ê¸°-nonBlocking ìˆ˜ì‹ í•˜ë ¤í•˜ì˜€ì§€ë§Œ, backendì—ì„œ HTTPë¥¼ í†µí•˜ì§€ ì•Šê³  ì§ì ‘ í† í”½ ë‚´ ë©”ì„¸ì§€ ìˆ˜ì‹ ìœ¼ë¡œ ë°”ê¾¸ì—ˆê¸°ì— ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤.

ìˆ˜ì • ì´í›„ ì˜ˆìƒë˜ëŠ” ì „ì²´ flowëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
> ìˆ˜ì •ëœ Flow(ë¡œê·¸ì¸ ì˜ˆì‹œ)
>
> 1. í´ë¼ì´ì–¸íŠ¸ ë¸Œë¼ìš°ì €ì—ì„œ GET /login FrontServerì— ì „ì†¡.
> 2. Front Serverì—ì„œ SSE ëª¨ë¸ ì „ì†¡ ë° ìœ ì €ì¸ì¦ ë©”ì‹œì§€ Kafkaì— login-request í† í”½ìœ¼ë¡œ ì „ë‹¬
> 3. í´ë¼ì´ì–¸íŠ¸ ë¸Œë¼ìš°ì €ì—ì„œ SSE ì´ë²¤íŠ¸ ìˆ˜ì‹  ì´ì „ ë¡œê·¸ì¸ ë¡œë”©ì°½ í™•ì¸
> 4. Backend Serverì—ì„œ Kafkaë©”ì„¸ì§€ ìˆ˜ì‹  ë° ì¸ì¦ë¡œì§ ìˆ˜í–‰ ì´í›„ login-response í† í”½ì— ì „ë‹¬
> 5. Front ServerëŠ” ì´ë¥¼ ìˆ˜ì‹  ë° SSE ì´ë²¤íŠ¸ í´ë¼ì´ì–¸íŠ¸ ë¸Œë¼ìš°ì €ì— ì „ë‹¬
> 6. í´ë¼ì´ì–¸íŠ¸ëŠ” ë¹„ë¡œì†Œ ë¡œê·¸ì¸ ì„±ê³µí™”ë©´ redirect
