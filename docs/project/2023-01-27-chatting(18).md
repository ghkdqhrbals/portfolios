---
layout: default
title: 18. ì„±ëŠ¥ê°œì„  ì‚¬ì•ˆë“¤ ë° ì ìš©ëœ ê°’
parent: ğŸ“Œ ì‹¤ì‹œê°„ ì±„íŒ…ì„œë²„ í”„ë¡œì íŠ¸
nav_order: 18
---

created at 2023-01-27
{: .label .label-yellow }


## ì„±ëŠ¥ê°œì„ ì‚¬ì•ˆë“¤ ë° ì ìš©ëœ ê°’ë“¤
* **batch** <-- ì„±ëŠ¥ì„ ê°€ì¥ ë§ì´ ê°œì„ ì‹œí‚¨ ë¶€ë¶„(ë„¤íŠ¸ì›Œí¬ ë¡œë“œ ê°ì†Œ)
  * before : 1
  * after : 100
* chatting_id ë‚´ë¶€ ìë™ ìƒì„±(ë„¤íŠ¸ì›Œí¬ ë¡œë“œ ê°ì†Œ)
  * before : from db sequence
  * after : random.UUID
* db parallel processor í™•ì¥(db cpu ì‚¬ìš©ë¥  ì¦ê°€)
  * before : 1ê°œ
  * after : 8ê°œ
* ì¿¼ë¦¬ ë¹ˆë„ ì¶•ì†Œ( ìµœì í™” + lazy fetch )
  * before : 6ë²ˆ
  * after : 4ë²ˆ
* ì„œë²„ ìˆ˜í‰ í™•ì¥
  * before : 1
  * after : 2

## í…ŒìŠ¤íŠ¸ í™˜ê²½

|                     | ì‚¬ì–‘                                                    | 
|---------------------|-------------------------------------------------------|
| MODEL               | MacBook Pro (13-inch, 2020, Four Thunderbolt 3 ports) |
| CPU                 | 2 GHz ì¿¼ë“œ ì½”ì–´ Intel Core i5                             |
| MEM                 | 32GB 3733 MHz LPDDR4X                                 |
| Disk                | Macintosh HD                                          |
| Docker Cpu          | 8                                                     |
| Docker Disk Storage | 150 GB                                                |
| Docker Memory       | 16 GB                                                 |

## ê²°ê³¼
10K request **80ì´ˆ -> 29ì´ˆ**ë¡œ ê°œì„ ë˜ì—ˆë‹¤.

### Before
```
test-multiple-http-request | Request url: http://127.0.0.1:8060/chat/chat
test-multiple-http-request | The number of HTTP Requests: 10000
test-multiple-http-request | The number of threads: 100
test-multiple-http-request | Proceeding! Please wait until getting all the responses
test-multiple-http-request | Elapsed Time: 80.02316758
test-multiple-http-request | Response status code:  200 , How many?:  10000
```

![img](../../../assets/img/db/2.png)

### After
```
...
test-multiple-http-request | Proceeding! Please wait until getting all the responses
test-multiple-http-request | Elapsed Time: 29.554215625
```

![img](../../../assets/img/db/8.png)