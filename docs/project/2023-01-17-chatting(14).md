---
layout: default
title: 14. ëŒ€ëŸ‰ Rest api test ìë™í™”
parent: ğŸ“Œ ì‹¤ì‹œê°„ ì±„íŒ…ì„œë²„ í”„ë¡œì íŠ¸
nav_order: 14
---
ì‹¤ì‹œê°„ ì±„íŒ…ë°© backendì— ì§ì ‘ ëŒ€ëŸ‰ì˜ Rest api testë¥¼ ì§„í–‰í–ˆì—ˆë‹¤. ê·¸ëŸ°ë° ì´ rest api testê°€ ë§¤ë²ˆ ì§ì ‘ ì„¤ì •í•´ì£¼ê¸° í˜ë“¤ì–´ì„œ ì´ë¥¼ Docker-compose ì™€ Viper ë¡œ ìë™í™” í•  ê²ƒì´ë‹¤. ì•„ë˜ëŠ” ìë™í™” ì‹œí‚¤ê³  ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ ë¨¼ì € ë³´ì¸ë‹¤. ì‚¬ìš©ë²•ê³¼ ì½”ë“œëŠ” [https://github.com/ghkdqhrbals/multiple-restapi-request-test](https://github.com/ghkdqhrbals/multiple-restapi-request-test) ì— ì—…ë¡œë“œí•˜ì˜€ë‹¤.

> **ì£¼ì˜ì !**
> 
> í”„ë¡ì‹œ ì„œë²„ê°€ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ë˜ê³ , í˜¸ìŠ¤íŠ¸í•œí…Œ í”„ë¡ì‹œ í¬íŠ¸ê°€ exposeë˜ì–´ìˆë‹¤ë©´, ê·¸ëŒ€ë¡œ `docker-compose up`ì„ ì‹¤í–‰í•˜ë©´ ëœë‹¤. í•˜ì§€ë§Œ ë‚´ë¶€ í¬íŠ¸ë¡œ exposeë˜ì–´ ìˆë‹¤ë©´, ê°™ì€ ë„¤íŠ¸ì›Œí¬ë¡œ ë¬¶ì–´ì¤˜ì•¼í•œë‹¤!!


## ì‹¤í–‰ ê²°ê³¼

```
test-multiple-http-request  | Request url: http://127.0.0.1:8080/auth/user
test-multiple-http-request  | The number of HTTP Requests: 10000
test-multiple-http-request  | The number of threads: 100
test-multiple-http-request  | Proceeding! Please wait until getting all the responses
test-multiple-http-request  | Elapsed Time: 30.533003028
test-multiple-http-request  | Response status code:  200 , How many?:  10000
```

ì´ 10Kê°œì˜ rest api call ì„ ì§„í–‰í•˜ì˜€ê³ , 100ê°œì˜ go-routineìœ¼ë¡œ ì§„í–‰í•œë‹¤. ê²°ê³¼ë¡œ ì•½ 30.5ì´ˆê°€ ì†Œìš”ë˜ì—ˆìœ¼ë©°, ì „ë¶€ 200 status codeë¥¼ ë°˜í™˜ ë°›ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

íë¦„ë„ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```
app.env ì„¤ì •
--(Viper)--> go build
--> build docker images
--> run docker container(network:host)
--> nginx
--> auth-server
```

ì•„ë˜ëŠ” ì´ë¯¸ì§€ ìƒì„±ì— í•„ìš”í•œ Dockerfile

```dockerfile
# Build stage
FROM golang:1.18.3-alpine3.16 AS builder
WORKDIR /app
COPY . .
RUN go build -o main main.go


# Run stage
FROM alpine:3.16
WORKDIR /app
COPY --from=builder /app/main .
COPY app.env .

CMD ["/app/main"]
```

ì•„ë˜ëŠ” docker-compose.yaml

```dockerfile
version: '3'
services:
  multi-test:
    container_name: test-multiple-http-request
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8002:8002"
    command: ["/app/main"]
    network_mode: "host"
```