---
layout: default
title: 8. Kafka/Spring/ELK Stack ì—°ë™ì™„ë£Œ
parent: ğŸ“Œ ì‹¤ì‹œê°„ ì±„íŒ…ì„œë²„ í”„ë¡œì íŠ¸
date: 2023-01-03
nav_order: 8
---

created at 2023-01-03
{: .label .label-yellow }

# ì„œë¡ 
ë“œë””ì–´ ê¸¸ê³  ê¸´ ì‹¤ì‹œê°„ ì±„íŒ…ë°© êµ¬í˜„ ì¤‘ backendê°€ ì™„ë£Œë˜ì—ˆë‹¤! ê²½í—˜ë§ê³  ì„¤ê³„ë¥¼ ì˜í•˜ì‹œëŠ” ë¶„ë“¤ì´ ë³´ë©´ ê°„ë‹¨í•´ë³´ì´ê² ì§€ë§Œ, ê²½í—˜ì´ ì „ë¬´í•œ í•„ìëŠ” ëª¨ë“  êµ¬í˜„ê³¼ ê¸°ìˆ  í•˜ë‚˜í•˜ë‚˜ê°€ ë²…ì°¼ë‹¤. ì§„ì§œ ì‘ì•  ê°œë°œìë¡œì¨ ê¸°ìˆ  ë¬¸ë²•ë¶€í„° ë°°ì›Œë‚˜ê°€ëŠ” ì…ì¥ì¸ë°, ë ˆí¼ëŸ°ìŠ¤ê°€ ì¡°ê¸ˆì´ë¼ë„ ë¯¸ë¹„í•œ ì„¤ëª…ì„ í•œë‹¤ë©´ êµ¬ê¸€ë§ë§Œ 3ì‹œê°„ ë„˜ê²Œ í•  ìˆ˜ ë°–ì— ì—†ì—ˆë‹¤. ê·¸ë¦¬ê³  ê°„ë‹¨í•œ ì—ëŸ¬ë“¤ë„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ëª‡ì‹œê°„ì„ ìŸì•„ ë¶€ì–´ì•¼ë§Œí–ˆë‹¤. ê·¸ë˜ì„œ ì´ë²ˆ Backend ë§ˆë¬´ë¦¬ í¬ìŠ¤íŒ…ì€ í•„ìì—ê²Œ ìƒë‹¹íˆ ëœ»ê¹Šì€ í¬ìŠ¤íŒ…ì´ë‹¤.

# Backend Architecture
![img](../../../assets/img/es/final.png)

# Visualized Kafka Traffics and others
![img](../../../assets/img/es/5.png)

# Running Containers
```
CONTAINER ID   IMAGE                                      COMMAND                  CREATED          STATUS          PORTS                                                                                                NAMES
c8844bebca0f   docker-elk_logstash                        "/usr/local/bin/dockâ€¦"   32 seconds ago   Up 30 seconds   0.0.0.0:5044->5044/tcp, 0.0.0.0:9600->9600/tcp, 0.0.0.0:50000->50000/tcp, 0.0.0.0:50000->50000/udp   docker-elk_logstash_1
10932c3ca0cf   docker-elk_kibana                          "/bin/tini -- /usr/lâ€¦"   32 seconds ago   Up 31 seconds   0.0.0.0:5601->5601/tcp                                                                               docker-elk_kibana_1
ecc046260f13   docker-elk_elasticsearch                   "/bin/tini -- /usr/lâ€¦"   33 seconds ago   Up 32 seconds   0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp                                                       docker-elk_elasticsearch_1
4f85aff682ba   spring-chatting-server_nginx               "/docker-entrypoint.â€¦"   54 minutes ago   Up 54 minutes   0.0.0.0:8080->80/tcp                                                                                 nginx
374824d2b950   spring-chatting-server_chatting-server-1   "java -jar app.jar"      54 minutes ago   Up 54 minutes   0.0.0.0:8083->8083/tcp                                                                               chatting-server-1
04b35b27012f   spring-chatting-server_chatting-server-2   "java -jar app.jar"      54 minutes ago   Up 54 minutes   0.0.0.0:8084->8084/tcp                                                                               chatting-server-2
ba305f53a20e   confluentinc/cp-kafka:7.2.1                "/etc/confluent/dockâ€¦"   54 minutes ago   Up 54 minutes   0.0.0.0:8099->8099/tcp, 9092/tcp                                                                     kafka3
204f557e1588   confluentinc/cp-kafka:7.2.1                "/etc/confluent/dockâ€¦"   54 minutes ago   Up 54 minutes   0.0.0.0:8098->8098/tcp, 9092/tcp                                                                     kafka2
bcc4230e019a   confluentinc/cp-kafka:7.2.1                "/etc/confluent/dockâ€¦"   54 minutes ago   Up 54 minutes   0.0.0.0:8097->8097/tcp, 9092/tcp                                                                     kafka1
1e4311a3184e   spring-chatting-server_auth-server         "java -jar app.jar"      54 minutes ago   Up 54 minutes   0.0.0.0:8085->8085/tcp                                                                               auth-server
3ae7be01ea42   postgres:12-alpine                         "docker-entrypoint.sâ€¦"   54 minutes ago   Up 54 minutes   5432/tcp, 0.0.0.0:5434->5434/tcp                                                                     chatting-db-2
a8aec1c46475   confluentinc/cp-zookeeper:7.2.1            "/etc/confluent/dockâ€¦"   54 minutes ago   Up 54 minutes   2181/tcp, 2888/tcp, 3888/tcp                                                                         zookeeper
35c58ec8ea78   postgres:12-alpine                         "docker-entrypoint.sâ€¦"   54 minutes ago   Up 54 minutes   5432/tcp, 0.0.0.0:5435->5435/tcp                                                                     auth-db
b6a5f60c3a39   postgres:12-alpine                         "docker-entrypoint.sâ€¦"   54 minutes ago   Up 54 minutes   5432/tcp, 0.0.0.0:5433->5433/tcp                                                                     chatting-db-1
```

# Code Index
1. User Authentication Server
2. Chat Server
3. Api gateway
4. Kafka
5. Elastic Search configuration
6. LogStash configuration
7. Kibana configuration

ëª¨ë“  ì½”ë“œëŠ” [https://github.com/ghkdqhrbals/spring-chatting-server/tree/v2](https://github.com/ghkdqhrbals/spring-chatting-server/tree/v2)ì— ì²¨ë¶€í•˜ì˜€ë‹¤.


